# 测试报告查看器使用指南

## 快速开始

### 方法1：使用批处理脚本（推荐，Windows用户）
双击运行 `view_report.bat` 文件，或在命令行中执行：
```bash
view_report.bat
```

### 方法2：使用Python脚本
```bash
python view_report.py
```

## 功能说明

### 1. 查看历史报告（实时服务器）
- **用途**：本地查看测试报告，支持交互式浏览
- **操作**：选择选项1，会自动打开最新的报告
- **特点**：
  - 实时渲染，交互性强
  - 支持筛选、搜索等功能
  - 按 `Ctrl+C` 停止服务器

### 2. 生成静态报告（用于分享）
- **用途**：生成可分享的HTML报告
- **操作**：选择选项2，输入报告名称（或按回车选择最新报告）
- **特点**：
  - 生成独立的HTML文件
  - 需要通过HTTP服务器查看（不能直接打开index.html）
  - 可以直接分享给他人

### 3. 通过HTTP服务器查看静态报告
- **用途**：使用HTTP服务器查看已生成的静态报告
- **操作**：选择选项3，输入报告名称（或按回车选择最新报告）
- **特点**：
  - 启动本地HTTP服务器
  - 自动在浏览器中打开报告
  - 支持完整的Allure功能

### 4. 列出所有报告
- **用途**：查看所有可用的历史报告
- **操作**：选择选项4
- **显示**：按时间倒序排列（最新的在前）

## 报告位置

### 原始报告数据
- **位置**：`./report/easyjava_YYYYMMDD_HHMMSS/`
- **内容**：JSON文件、附件、测试结果
- **用途**：Allure生成报告的原始数据

### 静态HTML报告
- **位置**：`./report/static/easyjava_YYYYMMDD_HHMMSS/`
- **内容**：HTML、CSS、JavaScript文件
- **用途**：直接在浏览器中查看，方便分享

## 分享报告的步骤

### 步骤1：生成静态报告
```bash
view_report.bat
# 选择选项2
# 输入要分享的报告名称
```

### 步骤2：找到生成的报告
静态报告会生成在：`./report/static/{报告名称}/`

### 步骤3：分享报告
将整个 `./report/static/{报告名称}/` 文件夹压缩并发送给他人

### 步骤4：查看报告
**重要**：Allure静态报告不能直接双击打开index.html文件！

**正确的方法**：
1. 接收者解压文件夹
2. 使用以下方法之一查看报告：
   - **方法A**：使用批处理脚本
     ```bash
     view_report.bat
     # 选择选项3（View static report with HTTP server）
     # 输入报告名称
     ```
   - **方法B**：使用Python脚本
     ```bash
     python serve_report.py "report/static/{报告名称}"
     ```
   - **方法C**：使用Allure命令
     ```bash
     allure open report/static/{报告名称}
     ```

## 示例

### 示例1：查看最新报告
```bash
view_report.bat
# 选择选项1
# 自动打开最新报告
```

### 示例2：分享特定报告
```bash
view_report.bat
# 选择选项2
# 输入报告名称：easyjava_20260103_080007
# 等待生成完成
# 分享 ./report/static/easyjava_20260103_080007/ 文件夹
```

### 示例3：查看所有可用报告
```bash
view_report.bat
# 选择选项3
# 查看所有历史报告列表
```

## 报告命名规则

报告名称格式：`easyjava_YYYYMMDD_HHMMSS`

示例：
- `easyjava_20260103_080007` - 2026年1月3日 08:00:07 生成的报告
- `easyjava_20260103_080202` - 2026年1月3日 08:02:02 生成的报告

## 常见问题

### Q: 为什么不能直接双击打开index.html？
**A**: Allure报告使用JavaScript通过AJAX加载数据文件。由于浏览器的安全策略（CORS），file://协议不允许跨域请求，导致数据加载失败（显示404错误）。

**解决方案**：
- 必须通过HTTP服务器访问报告
- 使用 `allure open`、`allure serve` 或本工具提供的HTTP服务器功能

### Q: Allure命令找不到？
**A**: 确保已安装Allure并添加到系统PATH
- 下载地址：https://docs.qameta.io/allure/
- 验证安装：`allure --version`

### Q: 报告无法打开？
**A**: 检查以下几点：
1. 报告目录是否存在
2. 报告是否包含有效的Allure数据文件
3. 尝试生成静态报告

### Q: 浏览器没有自动打开？
**A**: 手动打开 `index.html` 文件：
```bash
start report\static\{报告名称}\index.html
```

### Q: 如何删除旧报告？
**A**: 直接删除对应的报告文件夹：
```bash
rmdir /s /q report\easyjava_20260103_080007
```

## 技术要求

- Python 3.6+
- Allure命令行工具（已安装并添加到PATH）
- 现代浏览器（Chrome、Firefox、Edge等）

## 相关资源

- Allure官方文档：https://docs.qameta.io/allure/
- 测试自动化框架：查看项目README
- 详细使用指南：查看 `REPORT_VIEWER_GUIDE.md`
