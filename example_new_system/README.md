# æ–°ç³»ç»Ÿç¤ºä¾‹ - è®¢å•ç®¡ç†ç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–°ç³»ç»Ÿæµ‹è¯•ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨æµ‹è¯•æ¡†æ¶æ¥æµ‹è¯•è®¢å•ç®¡ç†ç³»ç»Ÿã€‚

## ğŸ¯ **å¿«é€Ÿå¼€å§‹**

### **æ–¹æ³•1ï¼šä¸€é”®æµ‹è¯•ï¼ˆæ¨èï¼‰**
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
python run_new_system.py
```

### **æ–¹æ³•2ï¼šæ‰‹åŠ¨æµ‹è¯•**
```bash
# 1. å¯åŠ¨MockæœåŠ¡å™¨
cd mock_server/api_server
python base/flask_service.py

# 2. è¿è¡Œæµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š
pytest example_new_system/testcase/ --alluredir=report/new_system_temp -v

# 3. æŸ¥çœ‹AllureæŠ¥å‘Š
allure serve report/new_system_temp
```

### **æ–¹æ³•3ï¼šä½¿ç”¨ä¸“ç”¨é…ç½®**
```bash
# è¿›å…¥æ–°ç³»ç»Ÿç›®å½•
cd example_new_system

# è¿è¡Œæµ‹è¯•ï¼ˆä½¿ç”¨æœ¬åœ°pytest.inié…ç½®ï¼‰
pytest

# æŸ¥çœ‹æŠ¥å‘Š
allure serve ../report/new_system_temp
```

## ğŸ“ **ç›®å½•ç»“æ„**

```
example_new_system/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ config.ini                   # ç³»ç»Ÿé…ç½®
â”œâ”€â”€ loginName.yaml              # ç™»å½•é…ç½®
â”œâ”€â”€ pytest.ini                 # pytestä¸“ç”¨é…ç½®
â”œâ”€â”€ environment.properties      # Allureç¯å¢ƒä¿¡æ¯
â”œâ”€â”€ æ–°ç³»ç»Ÿæµ‹è¯•æŒ‡å—.md           # è¯¦ç»†æµ‹è¯•æŒ‡å—
â””â”€â”€ testcase/                   # æµ‹è¯•ç”¨ä¾‹ç›®å½•
    â””â”€â”€ Order/                  # è®¢å•æ¨¡å—
        â”œâ”€â”€ createOrder.yaml    # åˆ›å»ºè®¢å•æ¥å£å®šä¹‰
        â”œâ”€â”€ queryOrder.yaml     # æŸ¥è¯¢è®¢å•æ¥å£å®šä¹‰
        â””â”€â”€ test_order.py       # è®¢å•æµ‹è¯•æ‰§è¡Œæ–‡ä»¶
```

## ğŸ§ª **æµ‹è¯•ç”¨ä¾‹è¯´æ˜**

### **è®¢å•ç®¡ç†æ¨¡å—**
- **åˆ›å»ºè®¢å•**: æµ‹è¯•è®¢å•åˆ›å»ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬æ­£å¸¸åˆ›å»ºã€å‚æ•°éªŒè¯ã€å¼‚å¸¸å¤„ç†
- **æŸ¥è¯¢è®¢å•**: æµ‹è¯•è®¢å•æŸ¥è¯¢åŠŸèƒ½ï¼ŒåŒ…æ‹¬æŒ‰IDæŸ¥è¯¢ã€åˆ—è¡¨æŸ¥è¯¢

### **æµ‹è¯•æ•°æ®**
- ä½¿ç”¨Mockæ•°æ®ï¼Œæ— éœ€çœŸå®æ•°æ®åº“
- æ”¯æŒå‚æ•°åŒ–æµ‹è¯•ï¼Œè¦†ç›–å¤šç§åœºæ™¯
- åŒ…å«æ­£å¸¸æµç¨‹å’Œå¼‚å¸¸æµç¨‹æµ‹è¯•

## ğŸ“Š **æŠ¥å‘ŠåŠŸèƒ½**

### **AllureæŠ¥å‘Šç‰¹æ€§**
- ğŸ“ˆ è¯¦ç»†çš„æµ‹è¯•æ‰§è¡Œç»Ÿè®¡
- ğŸ¯ æµ‹è¯•ç”¨ä¾‹åˆ†ç±»å’Œæ ‡è®°
- ğŸ“ æµ‹è¯•æ­¥éª¤å’Œæ–­è¨€è¯¦æƒ…
- ğŸ” å¤±è´¥ç”¨ä¾‹çš„è¯¦ç»†ä¿¡æ¯
- ğŸ“Š è¶‹åŠ¿åˆ†æå’Œå†å²å¯¹æ¯”
- ğŸ·ï¸ æµ‹è¯•ç¯å¢ƒä¿¡æ¯å±•ç¤º

### **æŠ¥å‘ŠæŸ¥çœ‹æ–¹å¼**
```bash
# å®æ—¶æŠ¥å‘Šï¼ˆæ¨èï¼‰
allure serve report/new_system_temp

# é™æ€HTMLæŠ¥å‘Š
allure generate report/new_system_temp -o report/new_system_html --clean
start report/new_system_html/index.html
```

## ğŸ”§ **é…ç½®è¯´æ˜**

### **config.ini - ç³»ç»Ÿé…ç½®**
```ini
[api_envi]
host = http://127.0.0.1:8787
```

### **loginName.yaml - ç™»å½•é…ç½®**
```yaml
- baseInfo:
    api_name: æ–°ç³»ç»Ÿç”¨æˆ·ç™»å½•
    url: /dar/user/login
    method: post
    header:
      Content-Type: application/x-www-form-urlencoded;charset=UTF-8
  testCase:
    - case_name: æ–°ç³»ç»Ÿç™»å½•éªŒè¯
      data:
        user_name: test01
        passwd: admin123
      validation:
        - contains: { 'msg_code': 200 }
        - contains: { 'msg': 'ç™»å½•æˆåŠŸ' }
      extract:
        token: $.token
```

## ğŸš€ **é«˜çº§ç”¨æ³•**

### **å¹¶è¡Œæµ‹è¯•**
```bash
# å®‰è£…å¹¶è¡Œæ’ä»¶
pip install pytest-xdist

# å¹¶è¡Œè¿è¡Œ
pytest example_new_system/testcase/ -n 2 --alluredir=report/new_system_temp
```

### **å¤±è´¥é‡è¯•**
```bash
# å®‰è£…é‡è¯•æ’ä»¶
pip install pytest-rerunfailures

# å¤±è´¥é‡è¯•
pytest example_new_system/testcase/ --reruns 2 --alluredir=report/new_system_temp
```

### **æ ‡è®°æµ‹è¯•**
```bash
# åªè¿è¡Œå†’çƒŸæµ‹è¯•
pytest example_new_system/testcase/ -m smoke

# åªè¿è¡Œå…³é”®åŠŸèƒ½æµ‹è¯•
pytest example_new_system/testcase/ -m critical

# æ’é™¤ä½ä¼˜å…ˆçº§æµ‹è¯•
pytest example_new_system/testcase/ -m "not low"
```

## ğŸ¨ **è‡ªå®šä¹‰æ‰©å±•**

### **æ·»åŠ æ–°çš„æµ‹è¯•æ¨¡å—**
1. åœ¨ `testcase/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. åˆ›å»ºYAMLæ¥å£å®šä¹‰æ–‡ä»¶
3. åˆ›å»ºPythonæµ‹è¯•æ‰§è¡Œæ–‡ä»¶
4. æ›´æ–°é…ç½®æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰

### **ä¿®æ”¹æµ‹è¯•ç¯å¢ƒ**
1. ç¼–è¾‘ `config.ini` ä¸­çš„hoståœ°å€
2. æ›´æ–° `loginName.yaml` ä¸­çš„ç™»å½•ä¿¡æ¯
3. ä¿®æ”¹ `environment.properties` ä¸­çš„ç¯å¢ƒæè¿°

## ğŸ“š **å‚è€ƒæ–‡æ¡£**

- [è¯¦ç»†æµ‹è¯•æŒ‡å—](./æ–°ç³»ç»Ÿæµ‹è¯•æŒ‡å—.md)
- [æ¡†æ¶é€‚é…æŒ‡å—](../adaptation_guide.md)
- [æµ‹è¯•å¯åŠ¨æ–¹æ³•](../test_startup_guide.md)

## ğŸ’¡ **æœ€ä½³å®è·µ**

1. **æµ‹è¯•å‰æ£€æŸ¥**
   - ç¡®ä¿MockæœåŠ¡å™¨è¿è¡Œ
   - éªŒè¯ç½‘ç»œè¿æ¥
   - æ£€æŸ¥æµ‹è¯•æ•°æ®

2. **æŠ¥å‘Šä¼˜åŒ–**
   - ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•åç§°
   - æ·»åŠ è¯¦ç»†çš„æµ‹è¯•æè¿°
   - åˆç†ä½¿ç”¨æµ‹è¯•æ ‡è®°

3. **ç»´æŠ¤å»ºè®®**
   - å®šæœŸæ›´æ–°æµ‹è¯•ç”¨ä¾‹
   - ä¿æŒæµ‹è¯•æ•°æ®çš„æœ‰æ•ˆæ€§
   - åŠæ—¶ä¿®å¤å¤±è´¥çš„æµ‹è¯•

## ğŸ†˜ **å¸¸è§é—®é¢˜**

### **Q: MockæœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥ç«¯å£8787æ˜¯å¦è¢«å ç”¨ï¼Œæˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£

### **Q: æµ‹è¯•ç”¨ä¾‹æ— æ³•æ‰¾åˆ°ï¼Ÿ**
A: ç¡®ä¿åœ¨æ­£ç¡®çš„ç›®å½•æ‰§è¡Œå‘½ä»¤ï¼Œæˆ–ä½¿ç”¨ç»å¯¹è·¯å¾„

### **Q: AllureæŠ¥å‘Šæ— æ³•ç”Ÿæˆï¼Ÿ**
A: æ£€æŸ¥Allureæ˜¯å¦æ­£ç¡®å®‰è£…ï¼Œæˆ–ä½¿ç”¨é™æ€æŠ¥å‘Šæ¨¡å¼

### **Q: æµ‹è¯•æ‰§è¡Œå¾ˆæ…¢ï¼Ÿ**
A: å°è¯•ä½¿ç”¨å¹¶è¡Œæµ‹è¯•æˆ–ä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹